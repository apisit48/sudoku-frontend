import{a as f}from"./axios-4a70c6fc.js";import{u as v}from"./websocket-faccd31e.js";import{u as k}from"./app-09add99f.js";import{_ as y}from"./_plugin-vue_export-helper-c27b6911.js";import{V as g}from"./VRow-6972d16d.js";import{V as _}from"./VBtn-5d7d800f.js";import{D as s,H as r,m as c,F as d,I as l,Q as i,K as n,L as m,J as w,G as h,R as S,S as b}from"./index-bc405bf9.js";import"./_commonjsHelpers-042e6b4d.js";import"./VGrid-a65038e9.js";import"./loader-195af9a8.js";import"./useRender-926a478b.js";const N={name:"WaitingRoomView",data(){return{room:this.$route.params.id}},setup(){return{websocket:v()}},created(){const o=this.$route.params.id;if(!this.websocket.stompClient){console.error("stompClient is not initialized yet.");return}try{f.get(`http://localhost:8080/api/room/${o}`).then(e=>{this.room=e.data})}catch(e){console.error(`Failed to get room data: ${e}`)}},methods:{startGame(){this.$router.push({name:"Game"})},leaveRoom(){const o=k(),u={roomName:this.$route.params.id,username:o.username};this.websocket.send("/app/game/leave",JSON.stringify(u)),this.$router.push({name:"Home"})},handleRoomUpdate(o){const e=JSON.parse(o.body);e.users||(e.users=[]),this.$set(this,"room",e)},handleSubscriptionError(o){console.error("Failed to subscribe: ",o.response.data)}}},V=o=>(S("data-v-42a13fb1"),o=o(),b(),o),R=V(()=>i("div",{class:"loadingTwo"},null,-1)),x={class:"waiting-room"},B={key:0,class:"top"},C={class:"mid"},D={v:"",if:"room",class:"dif"},G={key:0,class:"size"},I={key:1},F={key:1},U={class:"user"},W={class:"topBtn"},z={class:"botBtn"};function J(o,e,u,L,t,p){return s(),r(l,null,[R,c(g,{justify:"center"},{default:d(()=>[i("div",x,[t.room?(s(),r("h1",B,"Room: "+n(t.room.roomName),1)):m("",!0),i("div",C,[i("h2",D,"Difficulty: "+n(t.room.difficulty),1),t.room?(s(),r("h3",G,"Size: "+n(t.room.maxUsers),1)):m("",!0),t.room&&t.room.users?(s(),r("h3",I,"Players: "+n(t.room.users.length),1)):m("",!0)]),t.room?(s(),r("p",F,"Users: ")):m("",!0),(s(!0),r(l,null,w(t.room.users,a=>(s(),r(l,null,[a?(s(),r("div",{key:a.username},[i("p",U,n(a.username),1)])):m("",!0)],64))),256)),i("div",W,[c(_,{width:"380",color:"indigo-darken-3",variant:"outlined",onClick:e[0]||(e[0]=a=>p.startGame())},{default:d(()=>[h(" Start Game ")]),_:1})]),i("div",z,[c(_,{width:"380",color:"indigo-darken-3",variant:"outlined",onClick:e[1]||(e[1]=a=>p.leaveRoom())},{default:d(()=>[h(" Leave Room ")]),_:1})])])]),_:1})],64)}const M=y(N,[["render",J],["__scopeId","data-v-42a13fb1"]]);export{M as default};
