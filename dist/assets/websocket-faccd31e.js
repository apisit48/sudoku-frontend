import{aI as G}from"./index-bc405bf9.js";import{c as R,g as X}from"./_commonjsHelpers-042e6b4d.js";function B(U){throw new Error('Could not dynamically require "'+U+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var H={exports:{}};(function(U,D){(function(e){U.exports=e()})(function(){return function(){function e(m,I,h){function n(s,i){if(!I[s]){if(!m[s]){var o=typeof B=="function"&&B;if(!i&&o)return o(s,!0);if(r)return r(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var g=I[s]={exports:{}};m[s][0].call(g.exports,function(C){var f=m[s][1][C];return n(f||C)},g,g.exports,e,m,I,h)}return I[s].exports}for(var r=typeof B=="function"&&B,t=0;t<h.length;t++)n(h[t]);return n}return e}()({1:[function(e,m,I){(function(h){(function(){var n=e("./transport-list");m.exports=e("./main")(n),"_sockjs_onload"in h&&setTimeout(h._sockjs_onload,1)}).call(this)}).call(this,typeof R<"u"?R:typeof self<"u"?self:typeof window<"u"?window:{})},{"./main":14,"./transport-list":16}],2:[function(e,m,I){var h=e("inherits"),n=e("./event");function r(){n.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}h(r,n),m.exports=r},{"./event":4,inherits:57}],3:[function(e,m,I){var h=e("inherits"),n=e("./eventtarget");function r(){n.call(this)}h(r,n),r.prototype.removeAllListeners=function(t){t?delete this._listeners[t]:this._listeners={}},r.prototype.once=function(t,s){var i=this,o=!1;function l(){i.removeListener(t,l),o||(o=!0,s.apply(this,arguments))}this.on(t,l)},r.prototype.emit=function(){var t=arguments[0],s=this._listeners[t];if(s){for(var i=arguments.length,o=new Array(i-1),l=1;l<i;l++)o[l-1]=arguments[l];for(var g=0;g<s.length;g++)s[g].apply(this,o)}},r.prototype.on=r.prototype.addListener=n.prototype.addEventListener,r.prototype.removeListener=n.prototype.removeEventListener,m.exports.EventEmitter=r},{"./eventtarget":5,inherits:57}],4:[function(e,m,I){function h(n){this.type=n}h.prototype.initEvent=function(n,r,t){return this.type=n,this.bubbles=r,this.cancelable=t,this.timeStamp=+new Date,this},h.prototype.stopPropagation=function(){},h.prototype.preventDefault=function(){},h.CAPTURING_PHASE=1,h.AT_TARGET=2,h.BUBBLING_PHASE=3,m.exports=h},{}],5:[function(e,m,I){function h(){this._listeners={}}h.prototype.addEventListener=function(n,r){n in this._listeners||(this._listeners[n]=[]);var t=this._listeners[n];t.indexOf(r)===-1&&(t=t.concat([r])),this._listeners[n]=t},h.prototype.removeEventListener=function(n,r){var t=this._listeners[n];if(t){var s=t.indexOf(r);if(s!==-1){t.length>1?this._listeners[n]=t.slice(0,s).concat(t.slice(s+1)):delete this._listeners[n];return}}},h.prototype.dispatchEvent=function(){var n=arguments[0],r=n.type,t=arguments.length===1?[n]:Array.apply(null,arguments);if(this["on"+r]&&this["on"+r].apply(this,t),r in this._listeners)for(var s=this._listeners[r],i=0;i<s.length;i++)s[i].apply(this,t)},m.exports=h},{}],6:[function(e,m,I){var h=e("inherits"),n=e("./event");function r(t){n.call(this),this.initEvent("message",!1,!1),this.data=t}h(r,n),m.exports=r},{"./event":4,inherits:57}],7:[function(e,m,I){var h=e("./utils/iframe");function n(r){this._transport=r,r.on("message",this._transportMessage.bind(this)),r.on("close",this._transportClose.bind(this))}n.prototype._transportClose=function(r,t){h.postMessage("c",JSON.stringify([r,t]))},n.prototype._transportMessage=function(r){h.postMessage("t",r)},n.prototype._send=function(r){this._transport.send(r)},n.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},m.exports=n},{"./utils/iframe":47}],8:[function(e,m,I){(function(h){(function(){var n=e("./utils/url"),r=e("./utils/event"),t=e("./facade"),s=e("./info-iframe-receiver"),i=e("./utils/iframe"),o=e("./location"),l=function(){};m.exports=function(g,C){var f={};C.forEach(function(u){u.facadeTransport&&(f[u.facadeTransport.transportName]=u.facadeTransport)}),f[s.transportName]=s;var d;g.bootstrap_iframe=function(){var u;i.currentWindowId=o.hash.slice(1);var c=function(w){if(w.source===parent&&(typeof d>"u"&&(d=w.origin),w.origin===d)){var a;try{a=JSON.parse(w.data)}catch{l("bad json",w.data);return}if(a.windowId===i.currentWindowId)switch(a.type){case"s":var x;try{x=JSON.parse(a.data)}catch{l("bad json",a.data);break}var O=x[0],k=x[1],v=x[2],b=x[3];if(O!==g.version)throw new Error('Incompatible SockJS! Main site uses: "'+O+'", the iframe: "'+g.version+'".');if(!n.isOriginEqual(v,o.href)||!n.isOriginEqual(b,o.href))throw new Error("Can't connect to different domain from within an iframe. ("+o.href+", "+v+", "+b+")");u=new t(new f[k](v,b));break;case"m":u._send(a.data);break;case"c":u&&u._close(),u=null;break}}};r.attachEvent("message",c),i.postMessage("s")}}}).call(this)}).call(this,{env:{}})},{"./facade":7,"./info-iframe-receiver":10,"./location":13,"./utils/event":46,"./utils/iframe":47,"./utils/url":52,debug:55}],9:[function(e,m,I){(function(h){(function(){var n=e("events").EventEmitter,r=e("inherits"),t=e("./utils/object");function s(i,o){n.call(this);var l=this,g=+new Date;this.xo=new o("GET",i),this.xo.once("finish",function(C,f){var d,u;if(C===200){if(u=+new Date-g,f)try{d=JSON.parse(f)}catch{}t.isObject(d)||(d={})}l.emit("finish",d,u),l.removeAllListeners()})}r(s,n),s.prototype.close=function(){this.removeAllListeners(),this.xo.close()},m.exports=s}).call(this)}).call(this,{env:{}})},{"./utils/object":49,debug:55,events:3,inherits:57}],10:[function(e,m,I){var h=e("inherits"),n=e("events").EventEmitter,r=e("./transport/sender/xhr-local"),t=e("./info-ajax");function s(i){var o=this;n.call(this),this.ir=new t(i,r),this.ir.once("finish",function(l,g){o.ir=null,o.emit("message",JSON.stringify([l,g]))})}h(s,n),s.transportName="iframe-info-receiver",s.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},m.exports=s},{"./info-ajax":9,"./transport/sender/xhr-local":37,events:3,inherits:57}],11:[function(e,m,I){(function(h,n){(function(){var r=e("events").EventEmitter,t=e("inherits"),s=e("./utils/event"),i=e("./transport/iframe"),o=e("./info-iframe-receiver");function l(g,C){var f=this;r.call(this);var d=function(){var u=f.ifr=new i(o.transportName,C,g);u.once("message",function(c){if(c){var w;try{w=JSON.parse(c)}catch{f.emit("finish"),f.close();return}var a=w[0],x=w[1];f.emit("finish",a,x)}f.close()}),u.once("close",function(){f.emit("finish"),f.close()})};n.document.body?d():s.attachEvent("load",d)}t(l,r),l.enabled=function(){return i.enabled()},l.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},m.exports=l}).call(this)}).call(this,{env:{}},typeof R<"u"?R:typeof self<"u"?self:typeof window<"u"?window:{})},{"./info-iframe-receiver":10,"./transport/iframe":22,"./utils/event":46,debug:55,events:3,inherits:57}],12:[function(e,m,I){(function(h){(function(){var n=e("events").EventEmitter,r=e("inherits"),t=e("./utils/url"),s=e("./transport/sender/xdr"),i=e("./transport/sender/xhr-cors"),o=e("./transport/sender/xhr-local"),l=e("./transport/sender/xhr-fake"),g=e("./info-iframe"),C=e("./info-ajax");function f(d,u){var c=this;n.call(this),setTimeout(function(){c.doXhr(d,u)},0)}r(f,n),f._getReceiver=function(d,u,c){return c.sameOrigin?new C(u,o):i.enabled?new C(u,i):s.enabled&&c.sameScheme?new C(u,s):g.enabled()?new g(d,u):new C(u,l)},f.prototype.doXhr=function(d,u){var c=this,w=t.addPath(d,"/info");this.xo=f._getReceiver(d,w,u),this.timeoutRef=setTimeout(function(){c._cleanup(!1),c.emit("finish")},f.timeout),this.xo.once("finish",function(a,x){c._cleanup(!0),c.emit("finish",a,x)})},f.prototype._cleanup=function(d){clearTimeout(this.timeoutRef),this.timeoutRef=null,!d&&this.xo&&this.xo.close(),this.xo=null},f.prototype.close=function(){this.removeAllListeners(),this._cleanup(!1)},f.timeout=8e3,m.exports=f}).call(this)}).call(this,{env:{}})},{"./info-ajax":9,"./info-iframe":11,"./transport/sender/xdr":34,"./transport/sender/xhr-cors":35,"./transport/sender/xhr-fake":36,"./transport/sender/xhr-local":37,"./utils/url":52,debug:55,events:3,inherits:57}],13:[function(e,m,I){(function(h){(function(){m.exports=h.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""}}).call(this)}).call(this,typeof R<"u"?R:typeof self<"u"?self:typeof window<"u"?window:{})},{}],14:[function(e,m,I){(function(h,n){(function(){e("./shims");var r=e("url-parse"),t=e("inherits"),s=e("./utils/random"),i=e("./utils/escape"),o=e("./utils/url"),l=e("./utils/event"),g=e("./utils/transport"),C=e("./utils/object"),f=e("./utils/browser"),d=e("./utils/log"),u=e("./event/event"),c=e("./event/eventtarget"),w=e("./location"),a=e("./event/close"),x=e("./event/trans-message"),O=e("./info-receiver"),k=function(){},v;function b(p,E,y){if(!(this instanceof b))return new b(p,E,y);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");c.call(this),this.readyState=b.CONNECTING,this.extensions="",this.protocol="",y=y||{},y.protocols_whitelist&&d.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=y.transports,this._transportOptions=y.transportOptions||{},this._timeout=y.timeout||0;var T=y.sessionId||8;if(typeof T=="function")this._generateSessionId=T;else if(typeof T=="number")this._generateSessionId=function(){return s.string(T)};else throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._server=y.server||s.numberString(1e3);var _=new r(p);if(!_.host||!_.protocol)throw new SyntaxError("The URL '"+p+"' is invalid");if(_.hash)throw new SyntaxError("The URL must not contain a fragment");if(_.protocol!=="http:"&&_.protocol!=="https:")throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+_.protocol+"' is not allowed.");var A=_.protocol==="https:";if(w.protocol==="https:"&&!A&&!o.isLoopbackAddr(_.hostname))throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");E?Array.isArray(E)||(E=[E]):E=[];var N=E.sort();N.forEach(function(j,F){if(!j)throw new SyntaxError("The protocols entry '"+j+"' is invalid.");if(F<N.length-1&&j===N[F+1])throw new SyntaxError("The protocols entry '"+j+"' is duplicated.")});var L=o.getOrigin(w.href);this._origin=L?L.toLowerCase():null,_.set("pathname",_.pathname.replace(/\/+$/,"")),this.url=_.href,k("using url",this.url),this._urlInfo={nullOrigin:!f.hasDomain(),sameOrigin:o.isOriginEqual(this.url,w.href),sameScheme:o.isSchemeEqual(this.url,w.href)},this._ir=new O(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}t(b,c);function S(p){return p===1e3||p>=3e3&&p<=4999}b.prototype.close=function(p,E){if(p&&!S(p))throw new Error("InvalidAccessError: Invalid code");if(E&&E.length>123)throw new SyntaxError("reason argument has an invalid length");if(!(this.readyState===b.CLOSING||this.readyState===b.CLOSED)){var y=!0;this._close(p||1e3,E||"Normal closure",y)}},b.prototype.send=function(p){if(typeof p!="string"&&(p=""+p),this.readyState===b.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===b.OPEN&&this._transport.send(i.quote(p))},b.version=e("./version"),b.CONNECTING=0,b.OPEN=1,b.CLOSING=2,b.CLOSED=3,b.prototype._receiveInfo=function(p,E){if(this._ir=null,!p){this._close(1002,"Cannot connect to server");return}this._rto=this.countRTO(E),this._transUrl=p.base_url?p.base_url:this.url,p=C.extend(p,this._urlInfo);var y=v.filterToEnabled(this._transportsWhitelist,p);this._transports=y.main,k(this._transports.length+" enabled transports"),this._connect()},b.prototype._connect=function(){for(var p=this._transports.shift();p;p=this._transports.shift()){if(k("attempt",p.transportName),p.needBody&&(!n.document.body||typeof n.document.readyState<"u"&&n.document.readyState!=="complete"&&n.document.readyState!=="interactive")){this._transports.unshift(p),l.attachEvent("load",this._connect.bind(this));return}var E=Math.max(this._timeout,this._rto*p.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),E);var y=o.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),T=this._transportOptions[p.transportName],_=new p(y,this._transUrl,T);_.on("message",this._transportMessage.bind(this)),_.once("close",this._transportClose.bind(this)),_.transportName=p.transportName,this._transport=_;return}this._close(2e3,"All transports failed",!1)},b.prototype._transportTimeout=function(){this.readyState===b.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))},b.prototype._transportMessage=function(p){var E=this,y=p.slice(0,1),T=p.slice(1),_;switch(y){case"o":this._open();return;case"h":this.dispatchEvent(new u("heartbeat")),k("heartbeat",this.transport);return}if(T)try{_=JSON.parse(T)}catch{}if(!(typeof _>"u"))switch(y){case"a":Array.isArray(_)&&_.forEach(function(A){k("message",E.transport),E.dispatchEvent(new x(A))});break;case"m":k("message",this.transport),this.dispatchEvent(new x(_));break;case"c":Array.isArray(_)&&_.length===2&&this._close(_[0],_[1],!0);break}},b.prototype._transportClose=function(p,E){if(k("_transportClose",this.transport),this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),!S(p)&&p!==2e3&&this.readyState===b.CONNECTING){this._connect();return}this._close(p,E)},b.prototype._open=function(){k("_open",this._transport&&this._transport.transportName,this.readyState),this.readyState===b.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=b.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new u("open")),k("connected",this.transport)):this._close(1006,"Server lost session")},b.prototype._close=function(p,E,y){k("_close",this.transport,p,E,y,this.readyState);var T=!1;if(this._ir&&(T=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===b.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=b.CLOSING,setTimeout((function(){this.readyState=b.CLOSED,T&&this.dispatchEvent(new u("error"));var _=new a("close");_.wasClean=y||!1,_.code=p||1e3,_.reason=E,this.dispatchEvent(_),this.onmessage=this.onclose=this.onerror=null}).bind(this),0)},b.prototype.countRTO=function(p){return p>100?4*p:300+p},m.exports=function(p){return v=g(p),e("./iframe-bootstrap")(b,p),b}}).call(this)}).call(this,{env:{}},typeof R<"u"?R:typeof self<"u"?self:typeof window<"u"?window:{})},{"./event/close":2,"./event/event":4,"./event/eventtarget":5,"./event/trans-message":6,"./iframe-bootstrap":8,"./info-receiver":12,"./location":13,"./shims":15,"./utils/browser":44,"./utils/escape":45,"./utils/event":46,"./utils/log":48,"./utils/object":49,"./utils/random":50,"./utils/transport":51,"./utils/url":52,"./version":53,debug:55,inherits:57,"url-parse":60}],15:[function(e,m,I){var h=Array.prototype,n=Object.prototype,r=Function.prototype,t=String.prototype,s=h.slice,i=n.toString,o=function(E){return n.toString.call(E)==="[object Function]"},l=function(y){return i.call(y)==="[object Array]"},g=function(y){return i.call(y)==="[object String]"},C=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch{return!1}}(),f;C?f=function(E,y,T,_){!_&&y in E||Object.defineProperty(E,y,{configurable:!0,enumerable:!1,writable:!0,value:T})}:f=function(E,y,T,_){!_&&y in E||(E[y]=T)};var d=function(E,y,T){for(var _ in y)n.hasOwnProperty.call(y,_)&&f(E,_,y[_],T)},u=function(E){if(E==null)throw new TypeError("can't convert "+E+" to object");return Object(E)};function c(E){var y=+E;return y!==y?y=0:y!==0&&y!==1/0&&y!==-(1/0)&&(y=(y>0||-1)*Math.floor(Math.abs(y))),y}function w(E){return E>>>0}function a(){}d(r,{bind:function(y){var T=this;if(!o(T))throw new TypeError("Function.prototype.bind called on incompatible "+T);for(var _=s.call(arguments,1),A=function(){if(this instanceof F){var P=T.apply(this,_.concat(s.call(arguments)));return Object(P)===P?P:this}else return T.apply(y,_.concat(s.call(arguments)))},N=Math.max(0,T.length-_.length),L=[],j=0;j<N;j++)L.push("$"+j);var F=Function("binder","return function ("+L.join(",")+"){ return binder.apply(this, arguments); }")(A);return T.prototype&&(a.prototype=T.prototype,F.prototype=new a,a.prototype=null),F}}),d(Array,{isArray:l});var x=Object("a"),O=x[0]!=="a"||!(0 in x),k=function(y){var T=!0,_=!0;return y&&(y.call("foo",function(A,N,L){typeof L!="object"&&(T=!1)}),y.call([1],function(){_=typeof this=="string"},"x")),!!y&&T&&_};d(h,{forEach:function(y){var T=u(this),_=O&&g(this)?this.split(""):T,A=arguments[1],N=-1,L=_.length>>>0;if(!o(y))throw new TypeError;for(;++N<L;)N in _&&y.call(A,_[N],N,T)}},!k(h.forEach));var v=Array.prototype.indexOf&&[0,1].indexOf(1,2)!==-1;d(h,{indexOf:function(y){var T=O&&g(this)?this.split(""):u(this),_=T.length>>>0;if(!_)return-1;var A=0;for(arguments.length>1&&(A=c(arguments[1])),A=A>=0?A:Math.max(0,_+A);A<_;A++)if(A in T&&T[A]===y)return A;return-1}},v);var b=t.split;"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1?function(){var E=/()??/.exec("")[1]===void 0;t.split=function(y,T){var _=this;if(y===void 0&&T===0)return[];if(i.call(y)!=="[object RegExp]")return b.call(this,y,T);var A=[],N=(y.ignoreCase?"i":"")+(y.multiline?"m":"")+(y.extended?"x":"")+(y.sticky?"y":""),L=0,j,F,P,W;for(y=new RegExp(y.source,N+"g"),_+="",E||(j=new RegExp("^"+y.source+"$(?!\\s)",N)),T=T===void 0?-1>>>0:w(T);(F=y.exec(_))&&(P=F.index+F[0].length,!(P>L&&(A.push(_.slice(L,F.index)),!E&&F.length>1&&F[0].replace(j,function(){for(var M=1;M<arguments.length-2;M++)arguments[M]===void 0&&(F[M]=void 0)}),F.length>1&&F.index<_.length&&h.push.apply(A,F.slice(1)),W=F[0].length,L=P,A.length>=T)));)y.lastIndex===F.index&&y.lastIndex++;return L===_.length?(W||!y.test(""))&&A.push(""):A.push(_.slice(L)),A.length>T?A.slice(0,T):A}}():"0".split(void 0,0).length&&(t.split=function(y,T){return y===void 0&&T===0?[]:b.call(this,y,T)});var S=t.substr,p="".substr&&"0b".substr(-1)!=="b";d(t,{substr:function(y,T){return S.call(this,y<0&&(y=this.length+y)<0?0:y,T)}},p)},{}],16:[function(e,m,I){m.exports=[e("./transport/websocket"),e("./transport/xhr-streaming"),e("./transport/xdr-streaming"),e("./transport/eventsource"),e("./transport/lib/iframe-wrap")(e("./transport/eventsource")),e("./transport/htmlfile"),e("./transport/lib/iframe-wrap")(e("./transport/htmlfile")),e("./transport/xhr-polling"),e("./transport/xdr-polling"),e("./transport/lib/iframe-wrap")(e("./transport/xhr-polling")),e("./transport/jsonp-polling")]},{"./transport/eventsource":20,"./transport/htmlfile":21,"./transport/jsonp-polling":23,"./transport/lib/iframe-wrap":26,"./transport/websocket":38,"./transport/xdr-polling":39,"./transport/xdr-streaming":40,"./transport/xhr-polling":41,"./transport/xhr-streaming":42}],17:[function(e,m,I){(function(h,n){(function(){var r=e("events").EventEmitter,t=e("inherits"),s=e("../../utils/event"),i=e("../../utils/url"),o=n.XMLHttpRequest,l=function(){};function g(d,u,c,w){var a=this;r.call(this),setTimeout(function(){a._start(d,u,c,w)},0)}t(g,r),g.prototype._start=function(d,u,c,w){var a=this;try{this.xhr=new o}catch{}if(!this.xhr){this.emit("finish",0,"no xhr support"),this._cleanup();return}u=i.addQuery(u,"t="+ +new Date),this.unloadRef=s.unloadAdd(function(){a._cleanup(!0)});try{this.xhr.open(d,u,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){l("xhr timeout"),a.emit("finish",0,""),a._cleanup(!1)})}catch{this.emit("finish",0,""),this._cleanup(!1);return}if((!w||!w.noCredentials)&&g.supportsCORS&&(this.xhr.withCredentials=!0),w&&w.headers)for(var x in w.headers)this.xhr.setRequestHeader(x,w.headers[x]);this.xhr.onreadystatechange=function(){if(a.xhr){var O=a.xhr,k,v;switch(l("readyState",O.readyState),O.readyState){case 3:try{v=O.status,k=O.responseText}catch{}v===1223&&(v=204),v===200&&k&&k.length>0&&a.emit("chunk",v,k);break;case 4:v=O.status,v===1223&&(v=204),(v===12005||v===12029)&&(v=0),l("finish",v,O.responseText),a.emit("finish",v,O.responseText),a._cleanup(!1);break}}};try{a.xhr.send(c)}catch{a.emit("finish",0,""),a._cleanup(!1)}},g.prototype._cleanup=function(d){if(this.xhr){if(this.removeAllListeners(),s.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),d)try{this.xhr.abort()}catch{}this.unloadRef=this.xhr=null}},g.prototype.close=function(){this._cleanup(!0)},g.enabled=!!o;var C=["Active"].concat("Object").join("X");!g.enabled&&C in n&&(o=function(){try{return new n[C]("Microsoft.XMLHTTP")}catch{return null}},g.enabled=!!new o);var f=!1;try{f="withCredentials"in new o}catch{}g.supportsCORS=f,m.exports=g}).call(this)}).call(this,{env:{}},typeof R<"u"?R:typeof self<"u"?self:typeof window<"u"?window:{})},{"../../utils/event":46,"../../utils/url":52,debug:55,events:3,inherits:57}],18:[function(e,m,I){(function(h){(function(){m.exports=h.EventSource}).call(this)}).call(this,typeof R<"u"?R:typeof self<"u"?self:typeof window<"u"?window:{})},{}],19:[function(e,m,I){(function(h){(function(){var n=h.WebSocket||h.MozWebSocket;n?m.exports=function(t){return new n(t)}:m.exports=void 0}).call(this)}).call(this,typeof R<"u"?R:typeof self<"u"?self:typeof window<"u"?window:{})},{}],20:[function(e,m,I){var h=e("inherits"),n=e("./lib/ajax-based"),r=e("./receiver/eventsource"),t=e("./sender/xhr-cors"),s=e("eventsource");function i(o){if(!i.enabled())throw new Error("Transport created when disabled");n.call(this,o,"/eventsource",r,t)}h(i,n),i.enabled=function(){return!!s},i.transportName="eventsource",i.roundTrips=2,m.exports=i},{"./lib/ajax-based":24,"./receiver/eventsource":29,"./sender/xhr-cors":35,eventsource:18,inherits:57}],21:[function(e,m,I){var h=e("inherits"),n=e("./receiver/htmlfile"),r=e("./sender/xhr-local"),t=e("./lib/ajax-based");function s(i){if(!n.enabled)throw new Error("Transport created when disabled");t.call(this,i,"/htmlfile",n,r)}h(s,t),s.enabled=function(i){return n.enabled&&i.sameOrigin},s.transportName="htmlfile",s.roundTrips=2,m.exports=s},{"./lib/ajax-based":24,"./receiver/htmlfile":30,"./sender/xhr-local":37,inherits:57}],22:[function(e,m,I){(function(h){(function(){var n=e("inherits"),r=e("events").EventEmitter,t=e("../version"),s=e("../utils/url"),i=e("../utils/iframe"),o=e("../utils/event"),l=e("../utils/random"),g=function(){};function C(f,d,u){if(!C.enabled())throw new Error("Transport created when disabled");r.call(this);var c=this;this.origin=s.getOrigin(u),this.baseUrl=u,this.transUrl=d,this.transport=f,this.windowId=l.string(8);var w=s.addPath(u,"/iframe.html")+"#"+this.windowId;this.iframeObj=i.createIframe(w,function(a){c.emit("close",1006,"Unable to load an iframe ("+a+")"),c.close()}),this.onmessageCallback=this._message.bind(this),o.attachEvent("message",this.onmessageCallback)}n(C,r),C.prototype.close=function(){if(this.removeAllListeners(),this.iframeObj){o.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch{}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},C.prototype._message=function(f){if(g("message",f.data),!s.isOriginEqual(f.origin,this.origin)){g("not same origin",f.origin,this.origin);return}var d;try{d=JSON.parse(f.data)}catch{g("bad json",f.data);return}if(d.windowId!==this.windowId){g("mismatched window id",d.windowId,this.windowId);return}switch(d.type){case"s":this.iframeObj.loaded(),this.postMessage("s",JSON.stringify([t,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",d.data);break;case"c":var u;try{u=JSON.parse(d.data)}catch{g("bad json",d.data);return}this.emit("close",u[0],u[1]),this.close();break}},C.prototype.postMessage=function(f,d){this.iframeObj.post(JSON.stringify({windowId:this.windowId,type:f,data:d||""}),this.origin)},C.prototype.send=function(f){this.postMessage("m",f)},C.enabled=function(){return i.iframeEnabled},C.transportName="iframe",C.roundTrips=2,m.exports=C}).call(this)}).call(this,{env:{}})},{"../utils/event":46,"../utils/iframe":47,"../utils/random":50,"../utils/url":52,"../version":53,debug:55,events:3,inherits:57}],23:[function(e,m,I){(function(h){(function(){var n=e("inherits"),r=e("./lib/sender-receiver"),t=e("./receiver/jsonp"),s=e("./sender/jsonp");function i(o){if(!i.enabled())throw new Error("Transport created when disabled");r.call(this,o,"/jsonp",s,t)}n(i,r),i.enabled=function(){return!!h.document},i.transportName="jsonp-polling",i.roundTrips=1,i.needBody=!0,m.exports=i}).call(this)}).call(this,typeof R<"u"?R:typeof self<"u"?self:typeof window<"u"?window:{})},{"./lib/sender-receiver":28,"./receiver/jsonp":31,"./sender/jsonp":33,inherits:57}],24:[function(e,m,I){(function(h){(function(){var n=e("inherits"),r=e("../../utils/url"),t=e("./sender-receiver");function s(o){return function(l,g,C){var f={};typeof g=="string"&&(f.headers={"Content-type":"text/plain"});var d=r.addPath(l,"/xhr_send"),u=new o("POST",d,g,f);return u.once("finish",function(c){if(u=null,c!==200&&c!==204)return C(new Error("http status "+c));C()}),function(){u.close(),u=null;var c=new Error("Aborted");c.code=1e3,C(c)}}}function i(o,l,g,C){t.call(this,o,l,s(C),g,C)}n(i,t),m.exports=i}).call(this)}).call(this,{env:{}})},{"../../utils/url":52,"./sender-receiver":28,debug:55,inherits:57}],25:[function(e,m,I){(function(h){(function(){var n=e("inherits"),r=e("events").EventEmitter,t=function(){};function s(i,o){r.call(this),this.sendBuffer=[],this.sender=o,this.url=i}n(s,r),s.prototype.send=function(i){this.sendBuffer.push(i),this.sendStop||this.sendSchedule()},s.prototype.sendScheduleWait=function(){var i=this,o;this.sendStop=function(){i.sendStop=null,clearTimeout(o)},o=setTimeout(function(){i.sendStop=null,i.sendSchedule()},25)},s.prototype.sendSchedule=function(){t("sendSchedule",this.sendBuffer.length);var i=this;if(this.sendBuffer.length>0){var o="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,o,function(l){i.sendStop=null,l?(i.emit("close",l.code||1006,"Sending error: "+l),i.close()):i.sendScheduleWait()}),this.sendBuffer=[]}},s.prototype._cleanup=function(){this.removeAllListeners()},s.prototype.close=function(){this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},m.exports=s}).call(this)}).call(this,{env:{}})},{debug:55,events:3,inherits:57}],26:[function(e,m,I){(function(h){(function(){var n=e("inherits"),r=e("../iframe"),t=e("../../utils/object");m.exports=function(s){function i(o,l){r.call(this,s.transportName,o,l)}return n(i,r),i.enabled=function(o,l){if(!h.document)return!1;var g=t.extend({},l);return g.sameOrigin=!0,s.enabled(g)&&r.enabled()},i.transportName="iframe-"+s.transportName,i.needBody=!0,i.roundTrips=r.roundTrips+s.roundTrips-1,i.facadeTransport=s,i}}).call(this)}).call(this,typeof R<"u"?R:typeof self<"u"?self:typeof window<"u"?window:{})},{"../../utils/object":49,"../iframe":22,inherits:57}],27:[function(e,m,I){(function(h){(function(){var n=e("inherits"),r=e("events").EventEmitter,t=function(){};function s(i,o,l){r.call(this),this.Receiver=i,this.receiveUrl=o,this.AjaxObject=l,this._scheduleReceiver()}n(s,r),s.prototype._scheduleReceiver=function(){var i=this,o=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);o.on("message",function(l){i.emit("message",l)}),o.once("close",function(l,g){t("close",l,g,i.pollIsClosing),i.poll=o=null,i.pollIsClosing||(g==="network"?i._scheduleReceiver():(i.emit("close",l||1006,g),i.removeAllListeners()))})},s.prototype.abort=function(){this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},m.exports=s}).call(this)}).call(this,{env:{}})},{debug:55,events:3,inherits:57}],28:[function(e,m,I){(function(h){(function(){var n=e("inherits"),r=e("../../utils/url"),t=e("./buffered-sender"),s=e("./polling");function i(o,l,g,C,f){var d=r.addPath(o,l),u=this;t.call(this,o,g),this.poll=new s(C,d,f),this.poll.on("message",function(c){u.emit("message",c)}),this.poll.once("close",function(c,w){u.poll=null,u.emit("close",c,w),u.close()})}n(i,t),i.prototype.close=function(){t.prototype.close.call(this),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)},m.exports=i}).call(this)}).call(this,{env:{}})},{"../../utils/url":52,"./buffered-sender":25,"./polling":27,debug:55,inherits:57}],29:[function(e,m,I){(function(h){(function(){var n=e("inherits"),r=e("events").EventEmitter,t=e("eventsource"),s=function(){};function i(o){r.call(this);var l=this,g=this.es=new t(o);g.onmessage=function(C){s("message",C.data),l.emit("message",decodeURI(C.data))},g.onerror=function(C){s("error",g.readyState);var f=g.readyState!==2?"network":"permanent";l._cleanup(),l._close(f)}}n(i,r),i.prototype.abort=function(){this._cleanup(),this._close("user")},i.prototype._cleanup=function(){var o=this.es;o&&(o.onmessage=o.onerror=null,o.close(),this.es=null)},i.prototype._close=function(o){var l=this;setTimeout(function(){l.emit("close",null,o),l.removeAllListeners()},200)},m.exports=i}).call(this)}).call(this,{env:{}})},{debug:55,events:3,eventsource:18,inherits:57}],30:[function(e,m,I){(function(h,n){(function(){var r=e("inherits"),t=e("../../utils/iframe"),s=e("../../utils/url"),i=e("events").EventEmitter,o=e("../../utils/random"),l=function(){};function g(f){i.call(this);var d=this;t.polluteGlobalNamespace(),this.id="a"+o.string(6),f=s.addQuery(f,"c="+decodeURIComponent(t.WPrefix+"."+this.id)),l("using htmlfile",g.htmlfileEnabled);var u=g.htmlfileEnabled?t.createHtmlfile:t.createIframe;n[t.WPrefix][this.id]={start:function(){d.iframeObj.loaded()},message:function(c){d.emit("message",c)},stop:function(){d._cleanup(),d._close("network")}},this.iframeObj=u(f,function(){d._cleanup(),d._close("permanent")})}r(g,i),g.prototype.abort=function(){this._cleanup(),this._close("user")},g.prototype._cleanup=function(){this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete n[t.WPrefix][this.id]},g.prototype._close=function(f){this.emit("close",null,f),this.removeAllListeners()},g.htmlfileEnabled=!1;var C=["Active"].concat("Object").join("X");if(C in n)try{g.htmlfileEnabled=!!new n[C]("htmlfile")}catch{}g.enabled=g.htmlfileEnabled||t.iframeEnabled,m.exports=g}).call(this)}).call(this,{env:{}},typeof R<"u"?R:typeof self<"u"?self:typeof window<"u"?window:{})},{"../../utils/iframe":47,"../../utils/random":50,"../../utils/url":52,debug:55,events:3,inherits:57}],31:[function(e,m,I){(function(h,n){(function(){var r=e("../../utils/iframe"),t=e("../../utils/random"),s=e("../../utils/browser"),i=e("../../utils/url"),o=e("inherits"),l=e("events").EventEmitter,g=function(){};function C(f){var d=this;l.call(this),r.polluteGlobalNamespace(),this.id="a"+t.string(6);var u=i.addQuery(f,"c="+encodeURIComponent(r.WPrefix+"."+this.id));n[r.WPrefix][this.id]=this._callback.bind(this),this._createScript(u),this.timeoutId=setTimeout(function(){d._abort(new Error("JSONP script loaded abnormally (timeout)"))},C.timeout)}o(C,l),C.prototype.abort=function(){if(n[r.WPrefix][this.id]){var f=new Error("JSONP user aborted read");f.code=1e3,this._abort(f)}},C.timeout=35e3,C.scriptErrorTimeout=1e3,C.prototype._callback=function(f){this._cleanup(),!this.aborting&&(f&&this.emit("message",f),this.emit("close",null,"network"),this.removeAllListeners())},C.prototype._abort=function(f){this._cleanup(),this.aborting=!0,this.emit("close",f.code,f.message),this.removeAllListeners()},C.prototype._cleanup=function(){if(clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var f=this.script;f.parentNode.removeChild(f),f.onreadystatechange=f.onerror=f.onload=f.onclick=null,this.script=null}delete n[r.WPrefix][this.id]},C.prototype._scriptError=function(){var f=this;this.errorTimer||(this.errorTimer=setTimeout(function(){f.loadedOkay||f._abort(new Error("JSONP script loaded abnormally (onerror)"))},C.scriptErrorTimeout))},C.prototype._createScript=function(f){var d=this,u=this.script=n.document.createElement("script"),c;if(u.id="a"+t.string(8),u.src=f,u.type="text/javascript",u.charset="UTF-8",u.onerror=this._scriptError.bind(this),u.onload=function(){d._abort(new Error("JSONP script loaded abnormally (onload)"))},u.onreadystatechange=function(){if(g("onreadystatechange",u.readyState),/loaded|closed/.test(u.readyState)){if(u&&u.htmlFor&&u.onclick){d.loadedOkay=!0;try{u.onclick()}catch{}}u&&d._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},typeof u.async>"u"&&n.document.attachEvent)if(s.isOpera())c=this.script2=n.document.createElement("script"),c.text="try{var a = document.getElementById('"+u.id+"'); if(a)a.onerror();}catch(x){};",u.async=c.async=!1;else{try{u.htmlFor=u.id,u.event="onclick"}catch{}u.async=!0}typeof u.async<"u"&&(u.async=!0);var w=n.document.getElementsByTagName("head")[0];w.insertBefore(u,w.firstChild),c&&w.insertBefore(c,w.firstChild)},m.exports=C}).call(this)}).call(this,{env:{}},typeof R<"u"?R:typeof self<"u"?self:typeof window<"u"?window:{})},{"../../utils/browser":44,"../../utils/iframe":47,"../../utils/random":50,"../../utils/url":52,debug:55,events:3,inherits:57}],32:[function(e,m,I){(function(h){(function(){var n=e("inherits"),r=e("events").EventEmitter;function t(s,i){r.call(this);var o=this;this.bufferPosition=0,this.xo=new i("POST",s,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(l,g){o._chunkHandler(l,g),o.xo=null;var C=l===200?"network":"permanent";o.emit("close",null,C),o._cleanup()})}n(t,r),t.prototype._chunkHandler=function(s,i){if(!(s!==200||!i))for(var o=-1;;this.bufferPosition+=o+1){var l=i.slice(this.bufferPosition);if(o=l.indexOf(`
`),o===-1)break;var g=l.slice(0,o);g&&this.emit("message",g)}},t.prototype._cleanup=function(){this.removeAllListeners()},t.prototype.abort=function(){this.xo&&(this.xo.close(),this.emit("close",null,"user"),this.xo=null),this._cleanup()},m.exports=t}).call(this)}).call(this,{env:{}})},{debug:55,events:3,inherits:57}],33:[function(e,m,I){(function(h,n){(function(){var r=e("../../utils/random"),t=e("../../utils/url"),s=function(){},i,o;function l(C){try{return n.document.createElement('<iframe name="'+C+'">')}catch{var f=n.document.createElement("iframe");return f.name=C,f}}function g(){i=n.document.createElement("form"),i.style.display="none",i.style.position="absolute",i.method="POST",i.enctype="application/x-www-form-urlencoded",i.acceptCharset="UTF-8",o=n.document.createElement("textarea"),o.name="d",i.appendChild(o),n.document.body.appendChild(i)}m.exports=function(C,f,d){i||g();var u="a"+r.string(8);i.target=u,i.action=t.addQuery(t.addPath(C,"/jsonp_send"),"i="+u);var c=l(u);c.id=u,c.style.display="none",i.appendChild(c);try{o.value=f}catch{}i.submit();var w=function(a){c.onerror&&(c.onreadystatechange=c.onerror=c.onload=null,setTimeout(function(){c.parentNode.removeChild(c),c=null},500),o.value="",d(a))};return c.onerror=function(){w()},c.onload=function(){w()},c.onreadystatechange=function(a){s("onreadystatechange",u,c.readyState),c.readyState==="complete"&&w()},function(){w(new Error("Aborted"))}}}).call(this)}).call(this,{env:{}},typeof R<"u"?R:typeof self<"u"?self:typeof window<"u"?window:{})},{"../../utils/random":50,"../../utils/url":52,debug:55}],34:[function(e,m,I){(function(h,n){(function(){var r=e("events").EventEmitter,t=e("inherits"),s=e("../../utils/event"),i=e("../../utils/browser"),o=e("../../utils/url"),l=function(){};function g(C,f,d){var u=this;r.call(this),setTimeout(function(){u._start(C,f,d)},0)}t(g,r),g.prototype._start=function(C,f,d){var u=this,c=new n.XDomainRequest;f=o.addQuery(f,"t="+ +new Date),c.onerror=function(){u._error()},c.ontimeout=function(){u._error()},c.onprogress=function(){l("progress",c.responseText),u.emit("chunk",200,c.responseText)},c.onload=function(){u.emit("finish",200,c.responseText),u._cleanup(!1)},this.xdr=c,this.unloadRef=s.unloadAdd(function(){u._cleanup(!0)});try{this.xdr.open(C,f),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(d)}catch{this._error()}},g.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},g.prototype._cleanup=function(C){if(this.xdr){if(this.removeAllListeners(),s.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,C)try{this.xdr.abort()}catch{}this.unloadRef=this.xdr=null}},g.prototype.close=function(){this._cleanup(!0)},g.enabled=!!(n.XDomainRequest&&i.hasDomain()),m.exports=g}).call(this)}).call(this,{env:{}},typeof R<"u"?R:typeof self<"u"?self:typeof window<"u"?window:{})},{"../../utils/browser":44,"../../utils/event":46,"../../utils/url":52,debug:55,events:3,inherits:57}],35:[function(e,m,I){var h=e("inherits"),n=e("../driver/xhr");function r(t,s,i,o){n.call(this,t,s,i,o)}h(r,n),r.enabled=n.enabled&&n.supportsCORS,m.exports=r},{"../driver/xhr":17,inherits:57}],36:[function(e,m,I){var h=e("events").EventEmitter,n=e("inherits");function r(){var t=this;h.call(this),this.to=setTimeout(function(){t.emit("finish",200,"{}")},r.timeout)}n(r,h),r.prototype.close=function(){clearTimeout(this.to)},r.timeout=2e3,m.exports=r},{events:3,inherits:57}],37:[function(e,m,I){var h=e("inherits"),n=e("../driver/xhr");function r(t,s,i){n.call(this,t,s,i,{noCredentials:!0})}h(r,n),r.enabled=n.enabled,m.exports=r},{"../driver/xhr":17,inherits:57}],38:[function(e,m,I){(function(h){(function(){var n=e("../utils/event"),r=e("../utils/url"),t=e("inherits"),s=e("events").EventEmitter,i=e("./driver/websocket"),o=function(){};function l(g,C,f){if(!l.enabled())throw new Error("Transport created when disabled");s.call(this);var d=this,u=r.addPath(g,"/websocket");u.slice(0,5)==="https"?u="wss"+u.slice(5):u="ws"+u.slice(4),this.url=u,this.ws=new i(this.url,[],f),this.ws.onmessage=function(c){o("message event",c.data),d.emit("message",c.data)},this.unloadRef=n.unloadAdd(function(){d.ws.close()}),this.ws.onclose=function(c){o("close event",c.code,c.reason),d.emit("close",c.code,c.reason),d._cleanup()},this.ws.onerror=function(c){d.emit("close",1006,"WebSocket connection broken"),d._cleanup()}}t(l,s),l.prototype.send=function(g){var C="["+g+"]";this.ws.send(C)},l.prototype.close=function(){var g=this.ws;this._cleanup(),g&&g.close()},l.prototype._cleanup=function(){var g=this.ws;g&&(g.onmessage=g.onclose=g.onerror=null),n.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},l.enabled=function(){return!!i},l.transportName="websocket",l.roundTrips=2,m.exports=l}).call(this)}).call(this,{env:{}})},{"../utils/event":46,"../utils/url":52,"./driver/websocket":19,debug:55,events:3,inherits:57}],39:[function(e,m,I){var h=e("inherits"),n=e("./lib/ajax-based"),r=e("./xdr-streaming"),t=e("./receiver/xhr"),s=e("./sender/xdr");function i(o){if(!s.enabled)throw new Error("Transport created when disabled");n.call(this,o,"/xhr",t,s)}h(i,n),i.enabled=r.enabled,i.transportName="xdr-polling",i.roundTrips=2,m.exports=i},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xdr":34,"./xdr-streaming":40,inherits:57}],40:[function(e,m,I){var h=e("inherits"),n=e("./lib/ajax-based"),r=e("./receiver/xhr"),t=e("./sender/xdr");function s(i){if(!t.enabled)throw new Error("Transport created when disabled");n.call(this,i,"/xhr_streaming",r,t)}h(s,n),s.enabled=function(i){return i.cookie_needed||i.nullOrigin?!1:t.enabled&&i.sameScheme},s.transportName="xdr-streaming",s.roundTrips=2,m.exports=s},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xdr":34,inherits:57}],41:[function(e,m,I){var h=e("inherits"),n=e("./lib/ajax-based"),r=e("./receiver/xhr"),t=e("./sender/xhr-cors"),s=e("./sender/xhr-local");function i(o){if(!s.enabled&&!t.enabled)throw new Error("Transport created when disabled");n.call(this,o,"/xhr",r,t)}h(i,n),i.enabled=function(o){return o.nullOrigin?!1:s.enabled&&o.sameOrigin?!0:t.enabled},i.transportName="xhr-polling",i.roundTrips=2,m.exports=i},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xhr-cors":35,"./sender/xhr-local":37,inherits:57}],42:[function(e,m,I){(function(h){(function(){var n=e("inherits"),r=e("./lib/ajax-based"),t=e("./receiver/xhr"),s=e("./sender/xhr-cors"),i=e("./sender/xhr-local"),o=e("../utils/browser");function l(g){if(!i.enabled&&!s.enabled)throw new Error("Transport created when disabled");r.call(this,g,"/xhr_streaming",t,s)}n(l,r),l.enabled=function(g){return g.nullOrigin||o.isOpera()?!1:s.enabled},l.transportName="xhr-streaming",l.roundTrips=2,l.needBody=!!h.document,m.exports=l}).call(this)}).call(this,typeof R<"u"?R:typeof self<"u"?self:typeof window<"u"?window:{})},{"../utils/browser":44,"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xhr-cors":35,"./sender/xhr-local":37,inherits:57}],43:[function(e,m,I){(function(h){(function(){h.crypto&&h.crypto.getRandomValues?m.exports.randomBytes=function(n){var r=new Uint8Array(n);return h.crypto.getRandomValues(r),r}:m.exports.randomBytes=function(n){for(var r=new Array(n),t=0;t<n;t++)r[t]=Math.floor(Math.random()*256);return r}}).call(this)}).call(this,typeof R<"u"?R:typeof self<"u"?self:typeof window<"u"?window:{})},{}],44:[function(e,m,I){(function(h){(function(){m.exports={isOpera:function(){return h.navigator&&/opera/i.test(h.navigator.userAgent)},isKonqueror:function(){return h.navigator&&/konqueror/i.test(h.navigator.userAgent)},hasDomain:function(){if(!h.document)return!0;try{return!!h.document.domain}catch{return!1}}}}).call(this)}).call(this,typeof R<"u"?R:typeof self<"u"?self:typeof window<"u"?window:{})},{}],45:[function(e,m,I){var h=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,n,r=function(t){var s,i={},o=[];for(s=0;s<65536;s++)o.push(String.fromCharCode(s));return t.lastIndex=0,o.join("").replace(t,function(l){return i[l]="\\u"+("0000"+l.charCodeAt(0).toString(16)).slice(-4),""}),t.lastIndex=0,i};m.exports={quote:function(t){var s=JSON.stringify(t);return h.lastIndex=0,h.test(s)?(n||(n=r(h)),s.replace(h,function(i){return n[i]})):s}}},{}],46:[function(e,m,I){(function(h){(function(){var n=e("./random"),r={},t=!1,s=h.chrome&&h.chrome.app&&h.chrome.app.runtime;m.exports={attachEvent:function(o,l){typeof h.addEventListener<"u"?h.addEventListener(o,l,!1):h.document&&h.attachEvent&&(h.document.attachEvent("on"+o,l),h.attachEvent("on"+o,l))},detachEvent:function(o,l){typeof h.addEventListener<"u"?h.removeEventListener(o,l,!1):h.document&&h.detachEvent&&(h.document.detachEvent("on"+o,l),h.detachEvent("on"+o,l))},unloadAdd:function(o){if(s)return null;var l=n.string(8);return r[l]=o,t&&setTimeout(this.triggerUnloadCallbacks,0),l},unloadDel:function(o){o in r&&delete r[o]},triggerUnloadCallbacks:function(){for(var o in r)r[o](),delete r[o]}};var i=function(){t||(t=!0,m.exports.triggerUnloadCallbacks())};s||m.exports.attachEvent("unload",i)}).call(this)}).call(this,typeof R<"u"?R:typeof self<"u"?self:typeof window<"u"?window:{})},{"./random":50}],47:[function(e,m,I){(function(h,n){(function(){var r=e("./event"),t=e("./browser");m.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){m.exports.WPrefix in n||(n[m.exports.WPrefix]={})},postMessage:function(s,i){n.parent!==n&&n.parent.postMessage(JSON.stringify({windowId:m.exports.currentWindowId,type:s,data:i||""}),"*")},createIframe:function(s,i){var o=n.document.createElement("iframe"),l,g,C=function(){clearTimeout(l);try{o.onload=null}catch{}o.onerror=null},f=function(){o&&(C(),setTimeout(function(){o&&o.parentNode.removeChild(o),o=null},0),r.unloadDel(g))},d=function(c){o&&(f(),i(c))},u=function(c,w){setTimeout(function(){try{o&&o.contentWindow&&o.contentWindow.postMessage(c,w)}catch{}},0)};return o.src=s,o.style.display="none",o.style.position="absolute",o.onerror=function(){d("onerror")},o.onload=function(){clearTimeout(l),l=setTimeout(function(){d("onload timeout")},2e3)},n.document.body.appendChild(o),l=setTimeout(function(){d("timeout")},15e3),g=r.unloadAdd(f),{post:u,cleanup:f,loaded:C}},createHtmlfile:function(s,i){var o=["Active"].concat("Object").join("X"),l=new n[o]("htmlfile"),g,C,f,d=function(){clearTimeout(g),f.onerror=null},u=function(){l&&(d(),r.unloadDel(C),f.parentNode.removeChild(f),f=l=null,CollectGarbage())},c=function(x){l&&(u(),i(x))},w=function(x,O){try{setTimeout(function(){f&&f.contentWindow&&f.contentWindow.postMessage(x,O)},0)}catch{}};l.open(),l.write('<html><script>document.domain="'+n.document.domain+'";<\/script></html>'),l.close(),l.parentWindow[m.exports.WPrefix]=n[m.exports.WPrefix];var a=l.createElement("div");return l.body.appendChild(a),f=l.createElement("iframe"),a.appendChild(f),f.src=s,f.onerror=function(){c("onerror")},g=setTimeout(function(){c("timeout")},15e3),C=r.unloadAdd(u),{post:w,cleanup:u,loaded:d}}},m.exports.iframeEnabled=!1,n.document&&(m.exports.iframeEnabled=(typeof n.postMessage=="function"||typeof n.postMessage=="object")&&!t.isKonqueror())}).call(this)}).call(this,{env:{}},typeof R<"u"?R:typeof self<"u"?self:typeof window<"u"?window:{})},{"./browser":44,"./event":46,debug:55}],48:[function(e,m,I){(function(h){(function(){var n={};["log","debug","warn"].forEach(function(r){var t;try{t=h.console&&h.console[r]&&h.console[r].apply}catch{}n[r]=t?function(){return h.console[r].apply(h.console,arguments)}:r==="log"?function(){}:n.log}),m.exports=n}).call(this)}).call(this,typeof R<"u"?R:typeof self<"u"?self:typeof window<"u"?window:{})},{}],49:[function(e,m,I){m.exports={isObject:function(h){var n=typeof h;return n==="function"||n==="object"&&!!h},extend:function(h){if(!this.isObject(h))return h;for(var n,r,t=1,s=arguments.length;t<s;t++){n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(h[r]=n[r])}return h}}},{}],50:[function(e,m,I){var h=e("crypto"),n="abcdefghijklmnopqrstuvwxyz012345";m.exports={string:function(r){for(var t=n.length,s=h.randomBytes(r),i=[],o=0;o<r;o++)i.push(n.substr(s[o]%t,1));return i.join("")},number:function(r){return Math.floor(Math.random()*r)},numberString:function(r){var t=(""+(r-1)).length,s=new Array(t+1).join("0");return(s+this.number(r)).slice(-t)}}},{crypto:43}],51:[function(e,m,I){(function(h){(function(){var n=function(){};m.exports=function(r){return{filterToEnabled:function(t,s){var i={main:[],facade:[]};return t?typeof t=="string"&&(t=[t]):t=[],r.forEach(function(o){if(o&&!(o.transportName==="websocket"&&s.websocket===!1)){if(t.length&&t.indexOf(o.transportName)===-1){n("not in whitelist",o.transportName);return}o.enabled(s)?(n("enabled",o.transportName),i.main.push(o),o.facadeTransport&&i.facade.push(o.facadeTransport)):n("disabled",o.transportName)}}),i}}}}).call(this)}).call(this,{env:{}})},{debug:55}],52:[function(e,m,I){(function(h){(function(){var n=e("url-parse");m.exports={getOrigin:function(r){if(!r)return null;var t=new n(r);if(t.protocol==="file:")return null;var s=t.port;return s||(s=t.protocol==="https:"?"443":"80"),t.protocol+"//"+t.hostname+":"+s},isOriginEqual:function(r,t){var s=this.getOrigin(r)===this.getOrigin(t);return s},isSchemeEqual:function(r,t){return r.split(":")[0]===t.split(":")[0]},addPath:function(r,t){var s=r.split("?");return s[0]+t+(s[1]?"?"+s[1]:"")},addQuery:function(r,t){return r+(r.indexOf("?")===-1?"?"+t:"&"+t)},isLoopbackAddr:function(r){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(r)||/^\[::1\]$/.test(r)}}}).call(this)}).call(this,{env:{}})},{debug:55,"url-parse":60}],53:[function(e,m,I){m.exports="1.6.1"},{}],54:[function(e,m,I){var h=1e3,n=h*60,r=n*60,t=r*24,s=t*7,i=t*365.25;m.exports=function(f,d){d=d||{};var u=typeof f;if(u==="string"&&f.length>0)return o(f);if(u==="number"&&isFinite(f))return d.long?g(f):l(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))};function o(f){if(f=String(f),!(f.length>100)){var d=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(d){var u=parseFloat(d[1]),c=(d[2]||"ms").toLowerCase();switch(c){case"years":case"year":case"yrs":case"yr":case"y":return u*i;case"weeks":case"week":case"w":return u*s;case"days":case"day":case"d":return u*t;case"hours":case"hour":case"hrs":case"hr":case"h":return u*r;case"minutes":case"minute":case"mins":case"min":case"m":return u*n;case"seconds":case"second":case"secs":case"sec":case"s":return u*h;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}}}function l(f){var d=Math.abs(f);return d>=t?Math.round(f/t)+"d":d>=r?Math.round(f/r)+"h":d>=n?Math.round(f/n)+"m":d>=h?Math.round(f/h)+"s":f+"ms"}function g(f){var d=Math.abs(f);return d>=t?C(f,d,t,"day"):d>=r?C(f,d,r,"hour"):d>=n?C(f,d,n,"minute"):d>=h?C(f,d,h,"second"):f+" ms"}function C(f,d,u,c){var w=d>=u*1.5;return Math.round(f/u)+" "+c+(w?"s":"")}},{}],55:[function(e,m,I){(function(h){(function(){I.formatArgs=r,I.save=t,I.load=s,I.useColors=n,I.storage=i(),I.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),I.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+m.exports.humanize(this.diff),!this.useColors)return;const g="color: "+this.color;l.splice(1,0,g,"color: inherit");let C=0,f=0;l[0].replace(/%[a-zA-Z%]/g,d=>{d!=="%%"&&(C++,d==="%c"&&(f=C))}),l.splice(f,0,g)}I.log=console.debug||console.log||(()=>{});function t(l){try{l?I.storage.setItem("debug",l):I.storage.removeItem("debug")}catch{}}function s(){let l;try{l=I.storage.getItem("debug")}catch{}return!l&&typeof h<"u"&&"env"in h&&(l={}.DEBUG),l}function i(){try{return localStorage}catch{}}m.exports=e("./common")(I);const{formatters:o}=m.exports;o.j=function(l){try{return JSON.stringify(l)}catch(g){return"[UnexpectedJSONParseError]: "+g.message}}}).call(this)}).call(this,{env:{}})},{"./common":56}],56:[function(e,m,I){function h(n){t.debug=t,t.default=t,t.coerce=C,t.disable=o,t.enable=i,t.enabled=l,t.humanize=e("ms"),t.destroy=f,Object.keys(n).forEach(d=>{t[d]=n[d]}),t.names=[],t.skips=[],t.formatters={};function r(d){let u=0;for(let c=0;c<d.length;c++)u=(u<<5)-u+d.charCodeAt(c),u|=0;return t.colors[Math.abs(u)%t.colors.length]}t.selectColor=r;function t(d){let u,c=null,w,a;function x(...O){if(!x.enabled)return;const k=x,v=Number(new Date),b=v-(u||v);k.diff=b,k.prev=u,k.curr=v,u=v,O[0]=t.coerce(O[0]),typeof O[0]!="string"&&O.unshift("%O");let S=0;O[0]=O[0].replace(/%([a-zA-Z%])/g,(E,y)=>{if(E==="%%")return"%";S++;const T=t.formatters[y];if(typeof T=="function"){const _=O[S];E=T.call(k,_),O.splice(S,1),S--}return E}),t.formatArgs.call(k,O),(k.log||t.log).apply(k,O)}return x.namespace=d,x.useColors=t.useColors(),x.color=t.selectColor(d),x.extend=s,x.destroy=t.destroy,Object.defineProperty(x,"enabled",{enumerable:!0,configurable:!1,get:()=>c!==null?c:(w!==t.namespaces&&(w=t.namespaces,a=t.enabled(d)),a),set:O=>{c=O}}),typeof t.init=="function"&&t.init(x),x}function s(d,u){const c=t(this.namespace+(typeof u>"u"?":":u)+d);return c.log=this.log,c}function i(d){t.save(d),t.namespaces=d,t.names=[],t.skips=[];let u;const c=(typeof d=="string"?d:"").split(/[\s,]+/),w=c.length;for(u=0;u<w;u++)c[u]&&(d=c[u].replace(/\*/g,".*?"),d[0]==="-"?t.skips.push(new RegExp("^"+d.substr(1)+"$")):t.names.push(new RegExp("^"+d+"$")))}function o(){const d=[...t.names.map(g),...t.skips.map(g).map(u=>"-"+u)].join(",");return t.enable(""),d}function l(d){if(d[d.length-1]==="*")return!0;let u,c;for(u=0,c=t.skips.length;u<c;u++)if(t.skips[u].test(d))return!1;for(u=0,c=t.names.length;u<c;u++)if(t.names[u].test(d))return!0;return!1}function g(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}function C(d){return d instanceof Error?d.stack||d.message:d}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}m.exports=h},{ms:54}],57:[function(e,m,I){typeof Object.create=="function"?m.exports=function(n,r){r&&(n.super_=r,n.prototype=Object.create(r.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}))}:m.exports=function(n,r){if(r){n.super_=r;var t=function(){};t.prototype=r.prototype,n.prototype=new t,n.prototype.constructor=n}}},{}],58:[function(e,m,I){var h=Object.prototype.hasOwnProperty,n;function r(i){try{return decodeURIComponent(i.replace(/\+/g," "))}catch{return null}}function t(i){for(var o=/([^=?&]+)=?([^&]*)/g,l={},g;g=o.exec(i);){var C=r(g[1]),f=r(g[2]);C===null||f===null||C in l||(l[C]=f)}return l}function s(i,o){o=o||"";var l=[],g,C;typeof o!="string"&&(o="?");for(C in i)if(h.call(i,C)){if(g=i[C],!g&&(g===null||g===n||isNaN(g))&&(g=""),C=encodeURIComponent(C),g=encodeURIComponent(g),C===null||g===null)continue;l.push(C+"="+g)}return l.length?o+l.join("&"):""}I.stringify=s,I.parse=t},{}],59:[function(e,m,I){m.exports=function(n,r){if(r=r.split(":")[0],n=+n,!n)return!1;switch(r){case"http":case"ws":return n!==80;case"https":case"wss":return n!==443;case"ftp":return n!==21;case"gopher":return n!==70;case"file":return!1}return n!==0}},{}],60:[function(e,m,I){(function(h){(function(){var n=e("requires-port"),r=e("querystringify"),t=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,s=/[\n\r\t]/g,i=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,o=/:\d+$/,l=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,g=/^[a-zA-Z]:/;function C(v){return(v||"").toString().replace(t,"")}var f=[["#","hash"],["?","query"],function(b,S){return c(S.protocol)?b.replace(/\\/g,"/"):b},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],d={hash:1,query:1};function u(v){var b;typeof window<"u"?b=window:typeof h<"u"?b=h:typeof self<"u"?b=self:b={};var S=b.location||{};v=v||S;var p={},E=typeof v,y;if(v.protocol==="blob:")p=new x(unescape(v.pathname),{});else if(E==="string"){p=new x(v,{});for(y in d)delete p[y]}else if(E==="object"){for(y in v)y in d||(p[y]=v[y]);p.slashes===void 0&&(p.slashes=i.test(v.href))}return p}function c(v){return v==="file:"||v==="ftp:"||v==="http:"||v==="https:"||v==="ws:"||v==="wss:"}function w(v,b){v=C(v),v=v.replace(s,""),b=b||{};var S=l.exec(v),p=S[1]?S[1].toLowerCase():"",E=!!S[2],y=!!S[3],T=0,_;return E?y?(_=S[2]+S[3]+S[4],T=S[2].length+S[3].length):(_=S[2]+S[4],T=S[2].length):y?(_=S[3]+S[4],T=S[3].length):_=S[4],p==="file:"?T>=2&&(_=_.slice(2)):c(p)?_=S[4]:p?E&&(_=_.slice(2)):T>=2&&c(b.protocol)&&(_=S[4]),{protocol:p,slashes:E||c(p),slashesCount:T,rest:_}}function a(v,b){if(v==="")return b;for(var S=(b||"/").split("/").slice(0,-1).concat(v.split("/")),p=S.length,E=S[p-1],y=!1,T=0;p--;)S[p]==="."?S.splice(p,1):S[p]===".."?(S.splice(p,1),T++):T&&(p===0&&(y=!0),S.splice(p,1),T--);return y&&S.unshift(""),(E==="."||E==="..")&&S.push(""),S.join("/")}function x(v,b,S){if(v=C(v),v=v.replace(s,""),!(this instanceof x))return new x(v,b,S);var p,E,y,T,_,A,N=f.slice(),L=typeof b,j=this,F=0;for(L!=="object"&&L!=="string"&&(S=b,b=null),S&&typeof S!="function"&&(S=r.parse),b=u(b),E=w(v||"",b),p=!E.protocol&&!E.slashes,j.slashes=E.slashes||p&&b.slashes,j.protocol=E.protocol||b.protocol||"",v=E.rest,(E.protocol==="file:"&&(E.slashesCount!==2||g.test(v))||!E.slashes&&(E.protocol||E.slashesCount<2||!c(j.protocol)))&&(N[3]=[/(.*)/,"pathname"]);F<N.length;F++){if(T=N[F],typeof T=="function"){v=T(v,j);continue}y=T[0],A=T[1],y!==y?j[A]=v:typeof y=="string"?(_=y==="@"?v.lastIndexOf(y):v.indexOf(y),~_&&(typeof T[2]=="number"?(j[A]=v.slice(0,_),v=v.slice(_+T[2])):(j[A]=v.slice(_),v=v.slice(0,_)))):(_=y.exec(v))&&(j[A]=_[1],v=v.slice(0,_.index)),j[A]=j[A]||p&&T[3]&&b[A]||"",T[4]&&(j[A]=j[A].toLowerCase())}S&&(j.query=S(j.query)),p&&b.slashes&&j.pathname.charAt(0)!=="/"&&(j.pathname!==""||b.pathname!=="")&&(j.pathname=a(j.pathname,b.pathname)),j.pathname.charAt(0)!=="/"&&c(j.protocol)&&(j.pathname="/"+j.pathname),n(j.port,j.protocol)||(j.host=j.hostname,j.port=""),j.username=j.password="",j.auth&&(_=j.auth.indexOf(":"),~_?(j.username=j.auth.slice(0,_),j.username=encodeURIComponent(decodeURIComponent(j.username)),j.password=j.auth.slice(_+1),j.password=encodeURIComponent(decodeURIComponent(j.password))):j.username=encodeURIComponent(decodeURIComponent(j.auth)),j.auth=j.password?j.username+":"+j.password:j.username),j.origin=j.protocol!=="file:"&&c(j.protocol)&&j.host?j.protocol+"//"+j.host:"null",j.href=j.toString()}function O(v,b,S){var p=this;switch(v){case"query":typeof b=="string"&&b.length&&(b=(S||r.parse)(b)),p[v]=b;break;case"port":p[v]=b,n(b,p.protocol)?b&&(p.host=p.hostname+":"+b):(p.host=p.hostname,p[v]="");break;case"hostname":p[v]=b,p.port&&(b+=":"+p.port),p.host=b;break;case"host":p[v]=b,o.test(b)?(b=b.split(":"),p.port=b.pop(),p.hostname=b.join(":")):(p.hostname=b,p.port="");break;case"protocol":p.protocol=b.toLowerCase(),p.slashes=!S;break;case"pathname":case"hash":if(b){var E=v==="pathname"?"/":"#";p[v]=b.charAt(0)!==E?E+b:b}else p[v]=b;break;case"username":case"password":p[v]=encodeURIComponent(b);break;case"auth":var y=b.indexOf(":");~y?(p.username=b.slice(0,y),p.username=encodeURIComponent(decodeURIComponent(p.username)),p.password=b.slice(y+1),p.password=encodeURIComponent(decodeURIComponent(p.password))):p.username=encodeURIComponent(decodeURIComponent(b))}for(var T=0;T<f.length;T++){var _=f[T];_[4]&&(p[_[1]]=p[_[1]].toLowerCase())}return p.auth=p.password?p.username+":"+p.password:p.username,p.origin=p.protocol!=="file:"&&c(p.protocol)&&p.host?p.protocol+"//"+p.host:"null",p.href=p.toString(),p}function k(v){(!v||typeof v!="function")&&(v=r.stringify);var b,S=this,p=S.host,E=S.protocol;E&&E.charAt(E.length-1)!==":"&&(E+=":");var y=E+(S.protocol&&S.slashes||c(S.protocol)?"//":"");return S.username?(y+=S.username,S.password&&(y+=":"+S.password),y+="@"):S.password?(y+=":"+S.password,y+="@"):S.protocol!=="file:"&&c(S.protocol)&&!p&&S.pathname!=="/"&&(y+="@"),(p[p.length-1]===":"||o.test(S.hostname)&&!S.port)&&(p+=":"),y+=p+S.pathname,b=typeof S.query=="object"?v(S.query):S.query,b&&(y+=b.charAt(0)!=="?"?"?"+b:b),S.hash&&(y+=S.hash),y}x.prototype={set:O,toString:k},x.extractProtocol=w,x.location=u,x.trimLeft=C,x.qs=r,m.exports=x}).call(this)}).call(this,typeof R<"u"?R:typeof self<"u"?self:typeof window<"u"?window:{})},{querystringify:58,"requires-port":59}]},{},[1])(1)})})(H);var V=H.exports;const $=X(V);var J={exports:{}};(function(U,D){(function(e,m){U.exports=m()})(R,function(){var e=function(c,w){if(!(c instanceof w))throw new TypeError("Cannot call a class as a function")},m=function(){function c(w,a){for(var x=0;x<a.length;x++){var O=a[x];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(w,O.key,O)}}return function(w,a,x){return a&&c(w.prototype,a),x&&c(w,x),w}}(),I=function(){function c(w,a){var x=[],O=!0,k=!1,v=void 0;try{for(var b=w[Symbol.iterator](),S;!(O=(S=b.next()).done)&&(x.push(S.value),!(a&&x.length===a));O=!0);}catch(p){k=!0,v=p}finally{try{!O&&b.return&&b.return()}finally{if(k)throw v}}return x}return function(w,a){if(Array.isArray(w))return w;if(Symbol.iterator in Object(w))return c(w,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(c){if(Array.isArray(c)){for(var w=0,a=Array(c.length);w<c.length;w++)a[w]=c[w];return a}else return Array.from(c)},n={V1_0:"1.0",V1_1:"1.1",V1_2:"1.2",supportedVersions:function(){return"1.2,1.1,1.0"},supportedProtocols:function(){return["v10.stomp","v11.stomp","v12.stomp"]}},r={"v10.stomp":n.V1_0,"v11.stomp":n.V1_1,"v12.stomp":n.V1_2};function t(c,w){var a=r[c];return!a&&w&&w("DEPRECATED: "+c+" is not a recognized STOMP version. In next major client version, this will close the connection."),a||n.V1_2}var s={LF:`
`,NULL:"\0"},i=function(w){return w.replace(/^\s+|\s+$/g,"")};function o(c){var w=encodeURIComponent(c),a=w.replace(/%([0-9A-F]{2})/g,function(O,k){return String.fromCharCode("0x"+k)}),x=Array.prototype.map.call(a,function(O){return O.charCodeAt(0)});return new Uint8Array(x)}function l(c){var w=String.fromCharCode.apply(String,h(c)),a=w.replace(/(.)/g,function(x,O){var k=O.charCodeAt(0).toString(16).toUpperCase();return k.length<2&&(k="0"+k),"%"+k});return decodeURIComponent(a)}function g(c){return c?encodeURIComponent(c).match(/%..|./g).length:0}function C(){var c=new Date().getTime(),w=Math.floor(Math.random()*1e3);return c+"-"+w}var f=function(){function c(w){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";e(this,c),this.command=w,this.headers=a,this.body=x}return m(c,[{key:"toString",value:function(){var a=this,x=[this.command],O=this.headers["content-length"]===!1;return O&&delete this.headers["content-length"],Object.keys(this.headers).forEach(function(k){var v=a.headers[k];x.push(k+":"+v)}),this.body&&!O&&x.push("content-length:"+g(this.body)),x.push(s.LF+this.body),x.join(s.LF)}}],[{key:"unmarshallSingle",value:function(a){var x=a.search(new RegExp(s.LF+s.LF)),O=a.substring(0,x).split(s.LF),k=O.shift(),v={},b="",S=x+2,p=!0,E=!1,y=void 0;try{for(var T=O.reverse()[Symbol.iterator](),_;!(p=(_=T.next()).done);p=!0){var A=_.value,N=A.indexOf(":");v[i(A.substring(0,N))]=i(A.substring(N+1))}}catch(P){E=!0,y=P}finally{try{!p&&T.return&&T.return()}finally{if(E)throw y}}if(v["content-length"]){var L=parseInt(v["content-length"],10);b=(""+a).substring(S,S+L)}else for(var j=null,F=S;F<a.length&&(j=a.charAt(F),j!==s.NULL);F++)b+=j;return new c(k,v,b)}},{key:"unmarshall",value:function(a){var x=a.split(new RegExp(s.NULL+s.LF+"*")),O=x.slice(0,-1),k=x.slice(-1)[0],v={frames:O.map(function(b){return c.unmarshallSingle(b)}),partial:""};return k===s.LF||k.search(RegExp(s.NULL+s.LF+"*$"))!==-1?v.frames.push(c.unmarshallSingle(k)):v.partial=k,v}},{key:"marshall",value:function(a,x,O){var k=new c(a,x,O);return k.toString()+s.NULL}}]),c}(),d=function(){function c(w){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e(this,c);var x=a.binary,O=x===void 0?!1:x,k=a.heartbeat,v=k===void 0?{outgoing:1e4,incoming:1e4}:k,b=a.debug,S=b===void 0?!0:b,p=a.protocols,E=p===void 0?[]:p;this.ws=w,this.ws.binaryType="arraybuffer",this.isBinary=!!O,this.hasDebug=!!S,this.connected=!1,this.heartbeat=v||{outgoing:0,incoming:0},this.maxWebSocketFrameSize=16*1024,this.subscriptions={},this.partialData="",this.protocols=E}return m(c,[{key:"debug",value:function(){var a;this.hasDebug&&(a=console).log.apply(a,arguments)}},{key:"connect",value:function(){var a=this,x=this._parseConnect.apply(this,arguments),O=I(x,3),k=O[0],v=O[1],b=O[2];this.connectCallback=v,this.debug("Opening Web Socket..."),this.ws.onmessage=function(S){var p=S.data;if(S.data instanceof ArrayBuffer&&(p=l(new Uint8Array(S.data))),a.serverActivity=Date.now(),p===s.LF){a.debug("<<< PONG");return}a.debug("<<< "+p);var E=f.unmarshall(a.partialData+p);a.partialData=E.partial,E.frames.forEach(function(y){switch(y.command){case"CONNECTED":a.debug("connected to server "+y.headers.server),a.connected=!0,a.version=y.headers.version,a._setupHeartbeat(y.headers),v&&v(y);break;case"MESSAGE":var T=y.headers.subscription,_=a.subscriptions[T]||a.onreceive;if(_){var A=a.version===n.V1_2&&y.headers.ack||y.headers["message-id"];y.ack=a.ack.bind(a,A,T),y.nack=a.nack.bind(a,A,T),_(y)}else a.debug("Unhandled received MESSAGE: "+y);break;case"RECEIPT":a.onreceipt&&a.onreceipt(y);break;case"ERROR":b&&b(y);break;default:a.debug("Unhandled frame: "+y)}})},this.ws.onclose=function(S){a.debug("Whoops! Lost connection to "+a.ws.url+":",{event:S}),a._cleanUp(),b&&b(S)},this.ws.onopen=function(){a.debug("Web Socket Opened..."),k["accept-version"]=t(a.ws.protocol||a.protocols[0],a.debug.bind(a)),k["heart-beat"]||(k["heart-beat"]=[a.heartbeat.outgoing,a.heartbeat.incoming].join(",")),a._transmit("CONNECT",k)},this.ws.readyState===this.ws.OPEN&&this.ws.onopen()}},{key:"disconnect",value:function(a){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this._transmit("DISCONNECT",x),this.ws.onclose=null,this.ws.close(),this._cleanUp(),a&&a()}},{key:"send",value:function(a){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},k=Object.assign({},O);k.destination=a,this._transmit("SEND",k,x)}},{key:"begin",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"tx-"+C();return this._transmit("BEGIN",{transaction:a}),{id:a,commit:this.commit.bind(this,a),abort:this.abort.bind(this,a)}}},{key:"commit",value:function(a){this._transmit("COMMIT",{transaction:a})}},{key:"abort",value:function(a){this._transmit("ABORT",{transaction:a})}},{key:"ack",value:function(a,x){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},k=Object.assign({},O),v=this.version===n.V1_2?"id":"message-id";k[v]=a,k.subscription=x,this._transmit("ACK",k)}},{key:"nack",value:function(a,x){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},k=Object.assign({},O),v=this.version===n.V1_2?"id":"message-id";k[v]=a,k.subscription=x,this._transmit("NACK",k)}},{key:"subscribe",value:function(a,x){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},k=Object.assign({},O);return k.id||(k.id="sub-"+C()),k.destination=a,this.subscriptions[k.id]=x,this._transmit("SUBSCRIBE",k),{id:k.id,unsubscribe:this.unsubscribe.bind(this,k.id)}}},{key:"unsubscribe",value:function(a){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},O=Object.assign({},x);delete this.subscriptions[a],O.id=a,this._transmit("UNSUBSCRIBE",O)}},{key:"_cleanUp",value:function(){this.connected=!1,clearInterval(this.pinger),clearInterval(this.ponger)}},{key:"_transmit",value:function(a,x,O){var k=f.marshall(a,x,O);this.debug(">>> "+k,{frame:{command:a,headers:x,body:O}}),this._wsSend(k)}},{key:"_wsSend",value:function(a){for(this.isBinary&&(a=o(a)),this.debug(">>> length "+a.length);;)if(a.length>this.maxWebSocketFrameSize)this.ws.send(a.slice(0,this.maxWebSocketFrameSize)),a=a.slice(this.maxWebSocketFrameSize),this.debug("remaining = "+a.length);else return this.ws.send(a)}},{key:"_setupHeartbeat",value:function(a){var x=this;if(!(this.version!==n.V1_1&&this.version!==n.V1_2)){var O=(a["heart-beat"]||"0,0").split(",").map(function(E){return parseInt(E,10)}),k=I(O,2),v=k[0],b=k[1];if(!(this.heartbeat.outgoing===0||b===0)){var S=Math.max(this.heartbeat.outgoing,b);this.debug("send PING every "+S+"ms"),this.pinger=setInterval(function(){x._wsSend(s.LF),x.debug(">>> PING")},S)}if(!(this.heartbeat.incoming===0||v===0)){var p=Math.max(this.heartbeat.incoming,v);this.debug("check PONG every "+p+"ms"),this.ponger=setInterval(function(){var E=Date.now()-x.serverActivity;E>p*2&&(x.debug("did not receive server activity for the last "+E+"ms"),x.ws.close())},p)}}}},{key:"_parseConnect",value:function(){for(var a={},x=void 0,O=void 0,k=arguments.length,v=Array(k),b=0;b<k;b++)v[b]=arguments[b];switch(v.length){case 2:a=v[0],x=v[1];break;case 3:v[1]instanceof Function?(a=v[0],x=v[1],O=v[2]):(a.login=v[0],a.passcode=v[1],x=v[2]);break;case 4:a.login=v[0],a.passcode=v[1],x=v[2],O=v[3];break;default:a.login=v[0],a.passcode=v[1],x=v[2],O=v[3],a.host=v[4]}return[a,x,O]}}]),c}(),u={Frame:f,VERSIONS:n,client:function(w){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},x=new WebSocket(w,a.protocols||n.supportedProtocols());return new d(x,a)},over:function(){for(var w=arguments.length,a=Array(w),x=0;x<w;x++)a[x]=arguments[x];return new(Function.prototype.bind.apply(d,[null].concat(a)))}};return u})})(J);var z=J.exports;const Q=X(z),Y=G("websocket",{state:()=>({stompClient:null,connected:!1}),actions:{initialize(){return new Promise((U,D)=>{let e=new $("http://localhost:8080/sdk");this.stompClient=Q.over(e),this.stompClient.connect({},m=>{console.log("Connected: "+m),this.connected=!0,this.stompClient.subscribe("/topic/games",I=>{console.log(I.body)}),this.stompClient.subscribe("/topic/rooms",I=>{console.log("Room message: ",I.body)}),U()},m=>{console.log("Error: "+m),this.connected=!1,D(m)})})},send(U,D){this.connected?this.stompClient.send(U,D,{}):console.error("Cannot send message, not connected to WebSocket.")},disconnect(){this.connected&&this.stompClient.disconnect(()=>{console.log("Successfully disconnected from WebSocket"),this.connected=!1})}}});export{Y as u};
